<?xml version="1.0" encoding="utf-8" standalone="no"?>
<Project>
  <!-- Disable CLS compliance for tests -->
  <PropertyGroup>
    <AssemblyIsCLSCompliant>false</AssemblyIsCLSCompliant>
  </PropertyGroup>
  <!-- Disable code coverage when building and running tests in Visual Studio -->
  <PropertyGroup Condition=" '$(BuildingInsideVisualStudio)' == 'true' ">
    <CollectCoverage>false</CollectCoverage>
  </PropertyGroup>
  <!-- Allow all tests to be skipped when using Microsoft.Testing.Platform -->
  <ItemGroup>
    <TestingPlatformIgnoreExitCodes Include="8" />
  </ItemGroup>
  <!-- Provide a default .runsettings file for Microsoft.Testing.Platform -->
  <PropertyGroup>
    <UseDefaultTestRunSettings>$([MSBuild]::ValueOrDefault('$(UseDefaultTestRunSettings)', 'true'))</UseDefaultTestRunSettings>
  </PropertyGroup>
  <PropertyGroup>
    <_CoverageRunSettingsFileName>MartinCostello.BuildKit.runsettings</_CoverageRunSettingsFileName>
    <MartinCostelloBuildKitRunSettings>$([System.IO.Path]::Combine($(MSBuildThisFileDirectory), '..', '$(_CoverageRunSettingsFileName)'))</MartinCostelloBuildKitRunSettings>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(CoverageRunSettings)' == '' AND '$(UseDefaultTestRunSettings)' == 'true' ">
    <CoverageRunSettings>$(MartinCostelloBuildKitRunSettings)</CoverageRunSettings>
  </PropertyGroup>
  <ItemGroup Condition=" '$(UseMicrosoftTestingPlatformRunner)' == 'true' AND '$(UseDefaultTestRunSettings)' == 'true' AND '$(CoverageRunSettings)' == '$(MartinCostelloBuildKitRunSettings)' ">
    <AdditionalFiles Include="$(CoverageRunSettings)" Link="$(_CoverageRunSettingsFileName)" />
  </ItemGroup>
</Project>
